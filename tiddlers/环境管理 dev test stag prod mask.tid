created: 20250521021611897
modified: 20250801061904150
tags: 
title: 环境管理 dev test stag prod mask
type: text/vnd.tiddlywiki


对于 UI 来说：

* dev  是可以查看源码的环境
* test 不需要查看源码
* stag 不需要查看源码，应该尽量和 prod 一致
* prod 不需要查看源码

对于 API 来说：

* dev 是不需要 db migrate 的
* test 
* stag 
* prod


learn from https://github.com/TAIAN-INC

* mask 将 prod 中数据进行脱敏处理，方便进行代码调试，并且可以提前测试 batch scripts，数据量和实际数据量相符


! 总结

* dev branch 合并后自动部署到 dev（也有公司叫 sandbox），方便 developer 自测
* main branch 合并后自动部署 test，方便 tester 测试
* 使用 `pre-release` 部署 stag，可以测试，也可以提前演示
* 使用 `release` 发布 prod，正式发布了

有的团队会想要提前演示功能，这时候手动 deploy any branch 都是OK的，GitHub Actions  `on:workflow_dispatch`

